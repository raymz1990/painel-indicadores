# Indicadores

```{r}
#| include: false
source("./data/CVM/R/07_Indicadores.R")

p <- ggplot() + geom_blank() + theme_dark()
```

## {.sidebar}


```{r}
#| context: setup
library(gt)
library(dplyr)
library(ggplot2)
library(purrr)
library(ggiraph)
library(htmltools)
library(reactable)
```


```{r}
HTML('
  <div>
    <div style="font-weight:600">Empresas</div>
    <div id="checkboxes_div">
      <input type="checkbox" id="select_all" checked>
      <label for="select_all">Selecionar todos</label>
      <br>', 
      paste0(
        lapply(unique(ind_liquidez$EMPRESA), function(x) {
          paste0(
            '<input type="checkbox" name="checkboxes" value="', x, '" checked>',
            '<label>', x, '</label>',
            '<br>'
          )
        }), collapse = ""
      ),
    '</div>
  </div>
  <script>
    var select_all_checkbox = document.getElementById("select_all");
    var checkboxes = document.getElementsByName("checkboxes");
    select_all_checkbox.addEventListener("change", function() {
      for (var i = 0; i < checkboxes.length; i++) {
        checkboxes[i].checked = this.checked;
      }
      updateTable();
    });
    checkboxes.forEach(function(checkbox) {
      checkbox.addEventListener("change", function() {
        updateTable();
      });
    });
    
    function updateTable() {
      var selected_companies = [];
      checkboxes.forEach(function(checkbox) {
        if (checkbox.checked) {
          selected_companies.push(checkbox.value);
        }
      });
      
      var tbl = document.getElementById("ind_liquidez");
      var rows = tbl.getElementsByTagName("tr");
      for (var i = 1; i < rows.length; i++) {
        var companyName = rows[i].cells[0].innerHTML;
        if (selected_companies.includes(companyName)) {
          rows[i].style.display = "";
        } else {
          rows[i].style.display = "none";
        }
      }
    }
  </script>'
)





```

## Main Body

### First row {height="70%"}

#### Row {.tabset}



```{r}
#| title: INDICADORES DE LIQUIDEZ

# Formatando os números com duas casas decimais e separados por vírgula
ind_liquidez$liq_geral <- formatC(ind_liquidez$liq_geral, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$liq_corrente <- formatC(ind_liquidez$liq_corrente, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$liq_seca <- formatC(ind_liquidez$liq_seca, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$liq_imediata <- formatC(ind_liquidez$liq_imediata, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)

DT::datatable(
  ind_liquidez, 
  extensions = 'FixedHeader',
  rownames = F,
  colnames = c('Empresa' = 'EMPRESA',
               'Liquidez Geral' = "liq_geral", 
               'Liquidez Corrente' = "liq_corrente",
               'Liquidez Seca' = "liq_seca",
               'Liquidez Imediata' = "liq_imediata"),
  options = list(
    pageLength = 10,
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ),
  elementId = "ind_liquidez"
)



```

