---
#title: "Painel de Indicadores"
#author: "Raymundo Eduardo Pilz"
format:
  dashboard:
    embed-resources: true
scrolling: true
engine: knitr
---

```{r}
#| include: false
source("./data/CVM/R/07_Indicadores.R")

p <- ggplot() + geom_blank() + theme_dark()
```


# Page 1

## Row {height="70%"}

#### Row {.tabset}


::: {.card title="4T23"}
```{r}
#| title: INDICADORES DE LIQUIDEZ

ind_liquidez <- ind_liquidez %>%
    rename(
      Empresa = EMPRESA,
      `Liquidez Geral` = liq_geral,
      `Liquidez Corrente` = liq_corrente,
      `Liquidez Seca` = liq_seca,
      `Liquidez Imediata` = liq_imediata)

# Formatando os números com duas casas decimais e separados por vírgula
ind_liquidez$`Liquidez Geral` <- formatC(ind_liquidez$`Liquidez Geral`, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$`Liquidez Corrente` <- formatC(ind_liquidez$`Liquidez Corrente`, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$`Liquidez Seca` <- formatC(ind_liquidez$`Liquidez Seca`, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)
ind_liquidez$`Liquidez Imediata` <- formatC(ind_liquidez$`Liquidez Imediata`, format = "f", digits = 2, decimal.mark = ",", big.mark = ".", width = NULL)

liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "4T23") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    pageLength = 10,
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
     
    align = 'center'
    ))
```
:::

::: {.card title="3T23"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "3T23") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="2T23"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "2T23") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="1T23"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "1T23") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="4T22"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "4T22") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="3T22"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "3T22") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="2T22"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "2T22") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="1T22"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "1T22") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="4T21"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "4T21") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="3T21"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "3T21") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="2T21"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "2T21") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="1T21"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "1T21") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  editable = T,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="4T20"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "4T20") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  editable = T,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::
::: {.card title="3T20"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "3T20") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  editable = T,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="2T20"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "2T20") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  editable = T,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    width = '100%',
    align = 'center'
    ))
```
:::

::: {.card title="1T20"}
```{r}
liq_periodo_01 <- ind_liquidez %>%
  filter(PERIODO == "1T20") %>%
  select(-PERIODO)

  
DT::datatable(
  liq_periodo_01, 
  rownames = F,
  editable = T,
  options = list(
    initComplete = JS(
      "function(settings, json) {",
      "$(this.api().table().header()).css({
      'background-color': '#B52730', 
      'color': '#fff'});","}"),
    dom = 'Bfrtip',
    buttons = c('copy', 'csv', 'excel', 'pdf', 'print'))
)
```
:::













# Page 2

## Row {height="30%"}

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

## Row {height="70%"}

### Column {width="30%"}

#### Row {.tabset}

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

#### Row

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

### Column {.tabset width="70%"}

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

::: {.card}
![](https://placehold.co/300x300){height="100%"}
:::

# Page 3

::: {.title}
**Painel de Indicadores Interativo**
:::


Selecione a empresa ==>

Destaques Financeiros 3T24


### Row {height="10%"}

```{r}
#| component: valuebox
#| title: "Receita Líquida"

list(
  icon = "file-medical",
  color = "primary",
  value = "R$ 1,3 Mi"
)
```

```{r}
#| component: valuebox
#| title: "Custo/ROL"

list(
  icon = "calendar-week",
  color = "red",
  value = "R$ 0,5 Mi"
)
```

```{r}
#| component: valuebox
#| title: "SG&A/ROL"

list(
  icon = "",
  color = "light",
  value = "R$ 0,5 Mi"
)
```



::: {.valuebox icon="" color="light"}
SG&A/ROL

`{r} "R$ 0,2 Mi"`
:::

::: {.valuebox color="light"}
Lucro Líquido

`{r} "R$ 0,1 Mi"`
:::

## Row {height="70%"}

### Column {width="30%"}

#### Row {.tabset}


::: {.card title="Variance"}
```{r}
p
```
:::

::: {.card title="Features"}
```{r}
p
```
:::


```{r}
#| output: asis
#| fig-width: 8
#| fig-height: 6
for (i in 1:2) {
  cat(sprintf("\n\n::: {.card title='Dim %s'}\n\n", i))
  cat("\n\n:::: {.cell-output-display .html-fill-item .html-fill-container}\n\n")
  print(p + labs(title = i))
  cat("\n\n::::\n\n")
  cat("\n\n:::\n\n")
}
```

### Column {.tabset width="70%"}

```{r}
#| output: asis
#| fig-width: 8
#| fig-height: 3
for (itop in head(letters)) {
  cat(sprintf("\n\n::: {.card title='%s'}\n\n", itop))
  cat("\n\n:::: {.cell-output-display .html-fill-item .html-fill-container}\n\n")
  print(p + labs(title = itop))
  cat("\n\n::::\n\n")
  cat("\n\n:::\n\n")
}
```

## Row {height="70%"}

### Column {width="30%"}

#### Row {.tabset}


::: {.card title="Variance"}
```{r}
p
```
:::

::: {.card title="Features"}
```{r}
p
```
:::


```{r}
#| output: asis
#| fig-width: 8
#| fig-height: 6
for (i in 1:2) {
  cat(sprintf("\n\n::: {.card title='Dim %s'}\n\n", i))
  cat("\n\n:::: {.cell-output-display .html-fill-item .html-fill-container}\n\n")
  print(p + labs(title = i))
  cat("\n\n::::\n\n")
  cat("\n\n:::\n\n")
}
```

### Column {.tabset width="70%"}

```{r}
#| output: asis
#| fig-width: 8
#| fig-height: 3
for (itop in head(letters)) {
  cat(sprintf("\n\n::: {.card title='%s'}\n\n", itop))
  cat("\n\n:::: {.cell-output-display .html-fill-item .html-fill-container}\n\n")
  print(p + labs(title = itop))
  cat("\n\n::::\n\n")
  cat("\n\n:::\n\n")
}
```


{{< include 01_painel1.qmd >}}

{{< include 02_painel.qmd >}}
